var countries = [{"name":"Afghanistan","code":"af"},{"name":"Albania","code":"al"},{"name":"Algeria","code":"dz"},{"name":"Andorra","code":"ad"},{"name":"Angola","code":"ao"},{"name":"Anguilla","code":"ai"},{"name":"Antigua and Barbuda","code":"ag"},{"name":"Argentina","code":"ar"},{"name":"Armenia","code":"am"},{"name":"Aruba","code":"aw"},{"name":"Australia","code":"au"},{"name":"Austria","code":"at"},{"name":"Azerbaijan","code":"az"},{"name":"Bahamas","code":"bs"},{"name":"Bahrain","code":"bh"},{"name":"Bangladesh","code":"bd"},{"name":"Barbados","code":"bb"},{"name":"Belarus","code":"by"},{"name":"Belgium","code":"be"},{"name":"Belize","code":"bz"},{"name":"Benin","code":"bj"},{"name":"Bermuda","code":"bm"},{"name":"Bhutan","code":"bt"},{"name":"Bolivia","code":"bo"},{"name":"Bosnia and Herzegovina","code":"ba"},{"name":"Botswana","code":"bw"},{"name":"Brazil","code":"br"},{"name":"Brunei Darussalam","code":"bn"},{"name":"Bulgaria","code":"bg"},{"name":"Burkina Faso","code":"bf"},{"name":"Burundi","code":"bi"},{"name":"Cambodia","code":"kh"},{"name":"Cameroon","code":"cm"},{"name":"Canada","code":"ca"},{"name":"Cape Verde","code":"cv"},{"name":"Cayman Islands","code":"ky"},{"name":"Central African Republic","code":"cf"},{"name":"Chad","code":"td"},{"name":"Chile","code":"cl"},{"name":"China","code":"cn"},{"name":"Christmas Island","code":"cx"},{"name":"Cocos (Keeling) Islands","code":"cc"},{"name":"Colombia","code":"co"},{"name":"Comoros","code":"km"},{"name":"Congo","code":"cg"},{"name":"Cook Islands","code":"ck"},{"name":"Costa Rica","code":"cr"},{"name":"Cote D\u0027Ivoire (Ivory Coast)","code":"ci"},{"name":"Croatia (Hrvatska)","code":"hr"},{"name":"Cuba","code":"cu"},{"name":"Cyprus","code":"cy"},{"name":"Czech Republic","code":"cz"},{"name":"Democratic Republic of the Congo","code":"cd"},{"name":"Denmark","code":"dk"},{"name":"Djibouti","code":"dj"},{"name":"Dominica","code":"dm"},{"name":"Dominican Republic","code":"do"},{"name":"Ecuador","code":"ec"},{"name":"Egypt","code":"eg"},{"name":"El Salvador","code":"sv"},{"name":"Equatorial Guinea","code":"gq"},{"name":"Eritrea","code":"er"},{"name":"Estonia","code":"ee"},{"name":"Ethiopia","code":"et"},{"name":"Falkland Islands (Malvinas)","code":"fk"},{"name":"Faroe Islands","code":"fo"},{"name":"Federated States of Micronesia","code":"fm"},{"name":"Fiji","code":"fj"},{"name":"Finland","code":"fi"},{"name":"France","code":"fr"},{"name":"French Guiana","code":"gf"},{"name":"French Polynesia","code":"pf"},{"name":"French Southern Territories","code":"tf"},{"name":"Gabon","code":"ga"},{"name":"Gambia","code":"gm"},{"name":"Georgia","code":"ge"},{"name":"Germany","code":"de"},{"name":"Ghana","code":"gh"},{"name":"Gibraltar","code":"gi"},{"name":"Great Britain (UK)","code":"gb"},{"name":"Greece","code":"gr"},{"name":"Greenland","code":"gl"},{"name":"Grenada","code":"gd"},{"name":"Guadeloupe","code":"gp"},{"name":"Guatemala","code":"gt"},{"name":"Guinea","code":"gn"},{"name":"Guinea-Bissau","code":"gw"},{"name":"Guyana","code":"gy"},{"name":"Haiti","code":"ht"},{"name":"Honduras","code":"hn"},{"name":"Hong Kong","code":"hk"},{"name":"Hungary","code":"hu"},{"name":"Iceland","code":"is"},{"name":"India","code":"in"},{"name":"Indonesia","code":"id"},{"name":"Iran","code":"ir"},{"name":"Iraq","code":"iq"},{"name":"Ireland","code":"ie"},{"name":"Israel","code":"il"},{"name":"Italy","code":"it"},{"name":"Jamaica","code":"jm"},{"name":"Japan","code":"jp"},{"name":"Jordan","code":"jo"},{"name":"Kazakhstan","code":"kz"},{"name":"Kenya","code":"ke"},{"name":"Kiribati","code":"ki"},{"name":"Korea (North)","code":"kp"},{"name":"Korea (South)","code":"kr"},{"name":"Kuwait","code":"kw"},{"name":"Kyrgyzstan","code":"kg"},{"name":"Laos","code":"la"},{"name":"Latvia","code":"lv"},{"name":"Lebanon","code":"lb"},{"name":"Lesotho","code":"ls"},{"name":"Liberia","code":"lr"},{"name":"Libya","code":"ly"},{"name":"Liechtenstein","code":"li"},{"name":"Lithuania","code":"lt"},{"name":"Luxembourg","code":"lu"},{"name":"Macao","code":"mo"},{"name":"Macedonia","code":"mk"},{"name":"Madagascar","code":"mg"},{"name":"Malawi","code":"mw"},{"name":"Malaysia","code":"my"},{"name":"Maldives","code":"mv"},{"name":"Mali","code":"ml"},{"name":"Malta","code":"mt"},{"name":"Marshall Islands","code":"mh"},{"name":"Martinique","code":"mq"},{"name":"Mauritania","code":"mr"},{"name":"Mauritius","code":"mu"},{"name":"Mayotte","code":"yt"},{"name":"Mexico","code":"mx"},{"name":"Moldova","code":"md"},{"name":"Monaco","code":"mc"},{"name":"Mongolia","code":"mn"},{"name":"Montserrat","code":"ms"},{"name":"Morocco","code":"ma"},{"name":"Mozambique","code":"mz"},{"name":"Myanmar","code":"mm"},{"name":"Namibia","code":"na"},{"name":"Nauru","code":"nr"},{"name":"Nepal","code":"np"},{"name":"Netherlands","code":"nl"},{"name":"Netherlands Antilles","code":"an"},{"name":"New Caledonia","code":"nc"},{"name":"New Zealand (Aotearoa)","code":"nz"},{"name":"Nicaragua","code":"ni"},{"name":"Niger","code":"ne"},{"name":"Nigeria","code":"ng"},{"name":"Niue","code":"nu"},{"name":"Norfolk Island","code":"nf"},{"name":"Northern Mariana Islands","code":"mp"},{"name":"Norway","code":"no"},{"name":"NULL","code":"gg"},{"name":"Oman","code":"om"},{"name":"Pakistan","code":"pk"},{"name":"Palau","code":"pw"},{"name":"Palestinian Territory","code":"ps"},{"name":"Panama","code":"pa"},{"name":"Papua New Guinea","code":"pg"},{"name":"Paraguay","code":"py"},{"name":"Peru","code":"pe"},{"name":"Philippines","code":"ph"},{"name":"Pitcairn","code":"pn"},{"name":"Poland","code":"pl"},{"name":"Portugal","code":"pt"},{"name":"Qatar","code":"qa"},{"name":"Reunion","code":"re"},{"name":"Romania","code":"ro"},{"name":"Russian Federation","code":"ru"},{"name":"Rwanda","code":"rw"},{"name":"S. Georgia and S. Sandwich Islands","code":"gs"},{"name":"Saint Helena","code":"sh"},{"name":"Saint Kitts and Nevis","code":"kn"},{"name":"Saint Lucia","code":"lc"},{"name":"Saint Pierre and Miquelon","code":"pm"},{"name":"Saint Vincent and the Grenadines","code":"vc"},{"name":"Samoa","code":"ws"},{"name":"San Marino","code":"sm"},{"name":"Sao Tome and Principe","code":"st"},{"name":"Saudi Arabia","code":"sa"},{"name":"Senegal","code":"sn"},{"name":"Seychelles","code":"sc"},{"name":"Sierra Leone","code":"sl"},{"name":"Singapore","code":"sg"},{"name":"Slovakia","code":"sk"},{"name":"Slovenia","code":"si"},{"name":"Solomon Islands","code":"sb"},{"name":"Somalia","code":"so"},{"name":"South Africa","code":"za"},{"name":"Spain","code":"es"},{"name":"Sri Lanka","code":"lk"},{"name":"Sudan","code":"sd"},{"name":"Suriname","code":"sr"},{"name":"Svalbard and Jan Mayen","code":"sj"},{"name":"Swaziland","code":"sz"},{"name":"Sweden","code":"se"},{"name":"Switzerland","code":"ch"},{"name":"Syria","code":"sy"},{"name":"Taiwan","code":"tw"},{"name":"Tajikistan","code":"tj"},{"name":"Tanzania","code":"tz"},{"name":"Thailand","code":"th"},{"name":"Togo","code":"tg"},{"name":"Tokelau","code":"tk"},{"name":"Tonga","code":"to"},{"name":"Trinidad and Tobago","code":"tt"},{"name":"Tunisia","code":"tn"},{"name":"Turkey","code":"tr"},{"name":"Turkmenistan","code":"tm"},{"name":"Turks and Caicos Islands","code":"tc"},{"name":"Tuvalu","code":"tv"},{"name":"Uganda","code":"ug"},{"name":"Ukraine","code":"ua"},{"name":"United Arab Emirates","code":"ae"},{"name":"United States of America","code":"us"},{"name":"Uruguay","code":"uy"},{"name":"Uzbekistan","code":"uz"},{"name":"Vanuatu","code":"vu"},{"name":"Venezuela","code":"ve"},{"name":"Viet Nam","code":"vn"},{"name":"Virgin Islands (British)","code":"vg"},{"name":"Virgin Islands (U.S.)","code":"vi"},{"name":"Wallis and Futuna","code":"wf"},{"name":"Western Sahara","code":"eh"},{"name":"Yemen","code":"ye"},{"name":"Zaire (former)","code":"zr"},{"name":"Zambia","code":"zm"},{"name":"Zimbabwe","code":"zw"}];

var country = document.getElementById('country');
country.innerHTML = '<option value="">' + 'Choose a country' + '</option>';
for (var i = 0; i < countries.length; i++) {
    // POPULATE SELECT ELEMENT WITH JSON.
    country.innerHTML = country.innerHTML + '<option value="' + countries[i]['code'] + '">' + countries[i]['name'] + '</option>';
}



var states = [{"region":"Assam","country":"in"},{"region":"Goa","country":"in"},{"region":"Madhya Pradesh","country":"in"},{"region":"Manipur","country":"in"},{"region":"Meghalaya","country":"in"},{"region":"Mizoram","country":"in"},{"region":"National Capital Territory of Delhi","country":"in"},{"region":"Sikkim","country":"in"},{"region":"State of Andhra Pradesh","country":"in"},{"region":"State of Arunachal Pradesh","country":"in"},{"region":"State of Bihar","country":"in"},{"region":"State of Chhattisgarh","country":"in"},{"region":"State of Gujarat","country":"in"},{"region":"State of Haryana","country":"in"},{"region":"State of Himachal Pradesh","country":"in"},{"region":"State of Jammu and Kashmir","country":"in"},{"region":"State of Jharkhand","country":"in"},{"region":"State of Karnataka","country":"in"},{"region":"State of Kerala","country":"in"},{"region":"State of Maharashtra","country":"in"},{"region":"State of Nagaland","country":"in"},{"region":"State of Odisha","country":"in"},{"region":"State of Punjab","country":"in"},{"region":"State of Rajasthan","country":"in"},{"region":"State of Tamil Nadu","country":"in"},{"region":"State of Uttarakhand","country":"in"},{"region":"Telangana","country":"in"},{"region":"Tripura","country":"in"},{"region":"Union Territory of Andaman and Nicobar Islands","country":"in"},{"region":"Union Territory of Chandigarh","country":"in"},{"region":"Union Territory of Dadra and Nagar Haveli","country":"in"},{"region":"Union Territory of Daman and Diu","country":"in"},{"region":"Union Territory of Lakshadweep","country":"in"},{"region":"Union Territory of Puducherry","country":"in"},{"region":"Uttar Pradesh","country":"in"},{"region":"West Bengal","country":"in"}]

var state = document.getElementById('state');
state.innerHTML = '<option value="">' + 'Choose a state' + '</option>';
for (var i = 0; i < states.length; i++) {
    // POPULATE SELECT ELEMENT WITH JSON.
    state.innerHTML = state.innerHTML + '<option value="' + states[i]['region'] + '">' + states[i]['region'] + '</option>';
}

var cities = [{"city":"Ariyalur","region":"State of Tamil Nadu","country":"in","latitude":"11.14999962","longitude":"79.25000000"},{"city":"Chennai","region":"State of Tamil Nadu","country":"in","latitude":"13.08891010","longitude":"80.26483154"},{"city":"Coimbatore","region":"State of Tamil Nadu","country":"in","latitude":"10.80000019","longitude":"77.08999634"},{"city":"Cuddalore","region":"State of Tamil Nadu","country":"in","latitude":"11.52000046","longitude":"79.51000214"},{"city":"Dharmapuri","region":"State of Tamil Nadu","country":"in","latitude":"12.13000011","longitude":"78.23999786"},{"city":"Dindigul","region":"State of Tamil Nadu","country":"in","latitude":"10.39999962","longitude":"77.80000305"},{"city":"Erode","region":"State of Tamil Nadu","country":"in","latitude":"11.34000015","longitude":"77.55000305"},{"city":"Kancheepuram","region":"State of Tamil Nadu","country":"in","latitude":"12.67000008","longitude":"79.98999786"},{"city":"Kanniyakumari","region":"State of Tamil Nadu","country":"in","latitude":"8.31999969","longitude":"77.33999634"},{"city":"Karur","region":"State of Tamil Nadu","country":"in","latitude":"10.88000011","longitude":"78.19000244"},{"city":"Krishnagiri","region":"State of Tamil Nadu","country":"in","latitude":"12.57999992","longitude":"77.95999908"},{"city":"Madurai","region":"State of Tamil Nadu","country":"in","latitude":"9.89000034","longitude":"78.02999878"},{"city":"Nagapattinam","region":"State of Tamil Nadu","country":"in","latitude":"10.85000038","longitude":"79.73999786"},{"city":"Namakkal","region":"State of Tamil Nadu","country":"in","latitude":"11.30000019","longitude":"78.12999725"},{"city":"Nilgiris District","region":"State of Tamil Nadu","country":"in","latitude":"11.46000004","longitude":"76.63999939"},{"city":"Perambalur","region":"State of Tamil Nadu","country":"in","latitude":"11.27200031","longitude":"78.87380219"},{"city":"Pudukkottai","region":"State of Tamil Nadu","country":"in","latitude":"10.35000038","longitude":"78.90000153"},{"city":"Ramanathapuram","region":"State of Tamil Nadu","country":"in","latitude":"9.36999989","longitude":"78.69999695"},{"city":"Salem","region":"State of Tamil Nadu","country":"in","latitude":"11.68999958","longitude":"78.29000092"},{"city":"Sivaganga","region":"State of Tamil Nadu","country":"in","latitude":"9.92761993","longitude":"78.53762817"},{"city":"Thanjavur","region":"State of Tamil Nadu","country":"in","latitude":"10.64000034","longitude":"79.22000122"},{"city":"Theni","region":"State of Tamil Nadu","country":"in","latitude":"9.85000038","longitude":"77.41999817"},{"city":"Thiruvallur","region":"State of Tamil Nadu","country":"in","latitude":"13.25000000","longitude":"80.00000000"},{"city":"Thiruvarur","region":"State of Tamil Nadu","country":"in","latitude":"10.65999985","longitude":"79.55000305"},{"city":"Thoothukkudi","region":"State of Tamil Nadu","country":"in","latitude":"8.83749962","longitude":"77.96299744"},{"city":"Tiruchchirappalli","region":"State of Tamil Nadu","country":"in","latitude":"10.97000027","longitude":"78.65000153"},{"city":"Tirunelveli Kattabo","region":"State of Tamil Nadu","country":"in","latitude":"8.79269981","longitude":"77.57408905"},{"city":"Tiruppur","region":"State of Tamil Nadu","country":"in","latitude":"10.83813000","longitude":"77.40541840"},{"city":"Tiruvannamalai","region":"State of Tamil Nadu","country":"in","latitude":"12.51000023","longitude":"79.08999634"},{"city":"Vellore","region":"State of Tamil Nadu","country":"in","latitude":"12.85999966","longitude":"79.03500366"},{"city":"Villupuram","region":"State of Tamil Nadu","country":"in","latitude":"11.98999977","longitude":"79.37000275"},{"city":"Virudhunagar","region":"State of Tamil Nadu","country":"in","latitude":"9.44999981","longitude":"77.91999817"}];


var city = document.getElementById('city');
city.innerHTML = '<option value="">' + 'Choose a city' + '</option>';
for (var i = 0; i < cities.length; i++) {
    // POPULATE SELECT ELEMENT WITH JSON.
    city.innerHTML = city.innerHTML + '<option value="' + cities[i]['city'] + '">' + cities[i]['city'] + '</option>';
}

$('#submit').click(function() {
    var formValid = document.forms["post-form"].checkValidity();
    if(formValid) {
        var country = $("#country :selected").val();
        var state = $("#state :selected").val();
        var city = $("#city :selected").val();
        $('.loader').css('display', 'block');
        $('form').css('filter','blur(4px)');
        var xhttp = new XMLHttpRequest();
        xhttp.onload = function() {
            if (this.readyState == 4 && this.status == 200) {
                var data = JSON.parse(this.responseText);
                var weather = 'The coordinates of longitude, latitude is '+data.coord.lon+' and '+data.coord.lat+'. The current weather in your area is '+data.weather[0].main+'. It is '+data.weather[0].description+'. The temperature is '+data.main.temp+'';
                document.getElementById("weather").innerHTML = weather;
                document.getElementById("tweet").scrollIntoView();
                $('form').css('filter','none');
                $('.loader').css('display', 'none');
            }
        };
        xhttp.open("GET", "https://api.openweathermap.org/data/2.5/weather?q="+country+","+state+","+city+"&appid=64c0ff87c3e53fe6f3b0169df9e6d794", true);
        xhttp.send();
    }
})